# PopTools for Blender

**版本:** 2.1.0

**作者:** Muton & Claude3.7 & Gemini

**Blender 版本:** 4.2+

**位置:** 3D视图 > 侧边栏 > PopTools 标签页

## 描述

PopTools 是一个全面的 Blender 插件，旨在通过一系列强大直观的工具来优化您的工作流程。该插件目前包含以下核心功能：

*   **网格导出器:** 批量导出网格，包含LOD(细节级别)生成和导出指示器等高级选项。
*   **3Dcoat导出:** 提供专为3Dcoat优化的导出流程，包括UV布局优化和材质通道的便捷设置。
*   **ReTex 模块:** 一套高效的纹理和对象管理工具，包括：
    *   **智能对象重命名:** 基于预定义规则和自定义前缀 (例如 `mesh_item_[ItemLand]_[type]_[number]`) 智能重命名对象。
    *   **纹理重命名:** 
        *   根据对象名称设置纹理名称。
        *   批量替换所有纹理名称，可选择添加 `tex_` 前缀。
    *   **纹理调整大小:** 将选定纹理调整为预设分辨率 (128x128, 256x256, 512x512, 1024x1024) 并自动保存到 "Small" 子文件夹。
    *   **角色重命名:** 根据体型 (Man, Woman, Fatman, Fatwoman, Kid 和自定义类型) 和序列号重命名选定角色模型 (身体和头发)。格式：
        *   身体: `mesh_characters_[body_type]_[serial_number]`
        *   头发: `mesh_head_[body_type]_head[serial_number]`
    *   **动物重命名:** 根据预设体型 (Bird, Pigeon, Cow) 和序列号重命名选定动物模型。格式: `mesh_special_[animal_body_type]_[serial_number]`

## 功能

### 1. 网格导出器

*   **批量导出:** 一次性导出多个选定对象。
*   **多种格式:** 支持各种常见网格格式 (具体格式取决于Blender的内置导出器)。
*   **LOD生成:** 自动为网格创建细节级别以优化性能 (通过抽取修改器实现)。
*   **导出指示器:** 导出过程中的视觉反馈，清晰了解导出状态。

### 2. 3Dcoat导出

*   **专用流程:** 简化向3Dcoat导出模型的步骤。
*   **UV布局优化:** 确保模型在导入3Dcoat前具有良好的UV布局。
*   **材质通道设置:** 辅助设置与3Dcoat工作流程兼容的材质通道。

### 3. ReTex - 纹理与对象管理模块

所有ReTex工具都位于3D视图侧边栏的"PopTools"标签页中，提供直观的用户界面。

*   **智能对象重命名:**
    *   为项目定义"ItemLand"前缀，用于统一命名规范。
    *   使用对象名称中的类型标识符 (例如 `b` 代表气球, `h` 代表手, `p` 代表部件, `c` 代表帽子) 进行结构化命名。
*   **灵活的纹理命名:**
    *   自动重命名与选定对象链接的纹理文件，使其与对象名称保持一致。
    *   可选择为所有纹理强制添加 `tex_` 前缀，便于管理。
*   **高效的纹理调整大小:**
    *   快速将选定对象关联的纹理缩小到预设尺寸 (128, 256, 512, 1024)，优化性能和存储。
    *   自动将调整大小的纹理组织到原纹理所在目录下的 "Small" 子目录中，并保留原始文件。
*   **组织化的角色命名:**
    *   为角色资源 (身体和头发) 提供标准化的命名约定。
    *   轻松选择预设体型 (Man, Woman, Fatman, Fatwoman, Kid) 或输入自定义体型。
    *   自动序列编号以实现唯一标识，避免命名冲突。
*   **便捷的动物命名:**
    *   为动物模型提供标准化的命名约定。
    *   预设体型包括 Bird, Pigeon, Cow，并支持自定义输入。
    *   自动序列编号，确保命名唯一性。

## 安装

1.  下载 `PopTools.zip` 文件 (或整个插件文件夹)。
2.  在Blender中，转到 `编辑 > 首选项 > 插件`。
3.  点击 `安装...` 并导航到下载的 `.zip` 文件或PopTools文件夹中的 `__init__.py`。
4.  勾选"PopTools"插件名称旁边的复选框以启用插件。

## 使用方法

1.  打开Blender并确保PopTools插件已启用。
2.  在3D视图中，按 `N` 键打开侧边栏。
3.  找到"PopTools"标签页。

### 网格导出器

1.  选择要导出的一个或多个对象。
2.  在"网格导出器"面板中配置导出设置 (例如，选择是否生成LOD，设置LOD的抽取比例等)。
3.  设置导出路径。
4.  点击"导出选中项"按钮。


### ReTex模块

*   **智能对象重命名:**
    1.  在"ReTex"面板的"智能重命名"部分，输入您想要的"海岛名" (ItemLand前缀)。
    2.  确保您的对象名称包含类型标识符 (例如 `my_object_b_01` 其中 `b` 是类型)。
    3.  选择需要重命名的对象。
    4.  点击"重命名选中物体"按钮。
*   **纹理重命名:**
    1.  **根据对象名称重命名纹理:** 
        *   选择一个或多个对象。
        *   可选勾选"替换为'tex'前缀"复选框。
        *   点击"设置对象的纹理名称"按钮。
    2.  **重命名场景中的所有纹理:** 
        *   可选勾选"替换为'tex'前缀"复选框。
        *   点击"替换所有纹理"按钮。
*   **纹理调整大小:**
    1.  选择包含要调整大小纹理的一个或多个对象。
    2.  在"纹理调整大小"部分，从下拉菜单中选择目标"大小"预设 (128, 256, 512, 1024)。
    3.  点击"调整纹理大小"按钮。调整后的纹理将保存在原纹理路径下的 `Small` 子文件夹中。
*   **角色重命名:**
    1.  选择角色网格 (身体或头发)。
    2.  在"ReTex"面板的"角色重命名"部分：
        *   从"体型"下拉菜单中选择一个预设体型或选择"Custom"并输入自定义体型名称。
        *   输入"序号"。
    3.  根据所选对象是身体还是头发，点击"命名选中体型"或"命名选中发型"按钮。
*   **动物重命名:**
    1.  选择动物网格。
    2.  在"ReTex"面板的"动物重命名"部分：
        *   从"体型"下拉菜单中选择一个预设体型 (Bird, Pigeon, Cow) 或选择"Custom"并输入自定义体型名称。
        *   输入"序号"。
    3.  点击"命名选中动物"按钮。

## 更新日志

*   **v2.1.0 (当前版本):**
    *   新增"动物重命名"功能，包含预设 (Bird, Pigeon, Cow) 和命名格式 `mesh_special_[body_type]_[serial_number]`。
    *   新增"3Dcoat导出"功能，优化UV布局和材质通道，简化向3Dcoat的导出流程。
    *   更新GitHub的README，提供更详细的功能说明和使用指南。
*   **v2.0.0:**
    *   整合ReTex模块，包含角色重命名、纹理管理和智能对象重命名。
    *   模块化插件结构，提升可维护性和扩展性。
*   **v1.x.x:**
    *   初始网格导出器功能。

## 未来计划

*   更高级的纹理操作工具 (例如，批量格式转换、通道打包等)。
*   导出器的进一步改进 (例如，支持更多格式、更灵活的LOD设置)。
*   根据用户反馈和需求，添加更多实用功能。

## 贡献

欢迎通过以下方式为PopTools做出贡献：

*   Fork 本仓库，进行改进并提交 Pull Request。
*   通过 GitHub Issues 提交错误报告和功能建议。

---

感谢使用PopTools! 希望它能为您的Blender工作流程带来便利。